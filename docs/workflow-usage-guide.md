# GitHub Actions å·¥ä½œæµä½¿ç”¨æŒ‡å—

## ğŸ¯ è§¦å‘æ–¹å¼è¯¦è§£

### æ–¹å¼ä¸€ï¼šè‡ªåŠ¨è§¦å‘ï¼ˆæ¨é€æ ‡ç­¾ï¼‰

```bash
# 1. ç¡®ä¿ä»£ç å·²æäº¤
git add .
git commit -m "å‡†å¤‡å‘å¸ƒ v1.0.0"

# 2. åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾
git tag v1.0.0

# 3. æ¨é€æ ‡ç­¾åˆ°è¿œç¨‹ä»“åº“
git push origin v1.0.0
```

**è‡ªåŠ¨æ‰§è¡Œæµç¨‹**ï¼š
```
æ¨é€æ ‡ç­¾ v1.0.0
    â†“
è§¦å‘ GitHub Actions
    â†“
æ‰§è¡Œæ„å»º (npm run build)
    â†“
å½’æ¡£åˆ° versions/1.0.0/
    â†“
éƒ¨ç½²åˆ° GitHub Pages
```

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨è§¦å‘ï¼ˆWebç•Œé¢ï¼‰

#### ğŸ“± æ“ä½œæ­¥éª¤ï¼š

1. **è¿›å…¥GitHubä»“åº“** â†’ ç‚¹å‡» "Actions" æ ‡ç­¾é¡µ
2. **é€‰æ‹©å·¥ä½œæµ** â†’ ç‚¹å‡» "Build and Archive"
3. **æ‰‹åŠ¨è¿è¡Œ** â†’ ç‚¹å‡» "Run workflow" ä¸‹æ‹‰æŒ‰é’®

#### ğŸ–¼ï¸ ç•Œé¢ç¤ºä¾‹ï¼š
```
â”Œâ”€ Run workflow â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Use workflow from: [main â–¼]        â”‚
â”‚                                    â”‚
â”‚ æ‰‹åŠ¨æŒ‡å®šç‰ˆæœ¬å·                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ v1.2.0                          â”‚ â”‚  â† è¾“å…¥ç‰ˆæœ¬å·
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚
â”‚           [Run workflow]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### âš™ï¸ å‚æ•°è¯´æ˜ï¼š
- **ç‰ˆæœ¬å·å­—æ®µ**ï¼š
  - **ç•™ç©º** â†’ è‡ªåŠ¨ä» `package.json` è¯»å–ç‰ˆæœ¬
  - **å¡«å†™** â†’ ä½¿ç”¨æŒ‡å®šç‰ˆæœ¬ï¼ˆå¦‚ `v1.2.0`ï¼‰

### æ–¹å¼ä¸‰ï¼šAPIè§¦å‘ï¼ˆé«˜çº§ï¼‰

ä½¿ç”¨GitHub APIæ‰‹åŠ¨è§¦å‘ï¼š

```bash
curl -X POST \
  -H "Accept: application/vnd.github.v3+json" \
  -H "Authorization: token YOUR_TOKEN" \
  https://api.github.com/repos/your-username/your-project/actions/workflows/deploy.yml/dispatches \
  -d '{"ref":"main","inputs":{"version":"v1.3.0"}}'
```

## ğŸ” æ‰§è¡ŒçŠ¶æ€æŸ¥çœ‹

### å®æ—¶ç›‘æ§ï¼š
1. **Actionsé¡µé¢** â†’ æŸ¥çœ‹è¿è¡ŒçŠ¶æ€
2. **å·¥ä½œæµè¯¦æƒ…** â†’ ç‚¹å‡»å…·ä½“è¿è¡Œè®°å½•
3. **æ—¥å¿—æŸ¥çœ‹** â†’ å±•å¼€æ¯ä¸ªæ­¥éª¤æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

### çŠ¶æ€æŒ‡ç¤ºï¼š
- ğŸŸ¡ **è¿è¡Œä¸­**ï¼šæ­£åœ¨æ‰§è¡Œæ„å»ºå’Œå½’æ¡£
- âœ… **æˆåŠŸ**ï¼šå½’æ¡£å®Œæˆï¼Œå¯è®¿é—®æ–°ç‰ˆæœ¬
- âŒ **å¤±è´¥**ï¼šæŸ¥çœ‹é”™è¯¯æ—¥å¿—ï¼Œä¿®å¤é—®é¢˜åé‡è¯•

## ğŸ“‚ å½’æ¡£ç»“æœ

æˆåŠŸåçš„ç›®å½•ç»“æ„ï¼š
```
your-project/
â”œâ”€â”€ gh-pages åˆ†æ”¯/
â”‚   â”œâ”€â”€ versions/
â”‚   â”‚   â”œâ”€â”€ 1.0.0/          â† ç‰ˆæœ¬ v1.0.0 çš„å®Œæ•´ç«™ç‚¹
â”‚   â”‚   â”‚   â”œâ”€â”€ index.html
â”‚   â”‚   â”‚   â”œâ”€â”€ assets/
â”‚   â”‚   â”‚   â””â”€â”€ version-metadata.json
â”‚   â”‚   â”œâ”€â”€ 1.2.0/          â† ç‰ˆæœ¬ v1.2.0 çš„å®Œæ•´ç«™ç‚¹
â”‚   â”‚   â”œâ”€â”€ version-switcher.js
â”‚   â”‚   â”œâ”€â”€ versions.json    â† ç‰ˆæœ¬ç´¢å¼•
â”‚   â”‚   â””â”€â”€ index.html      â† ç‰ˆæœ¬æ€»è§ˆé¡µé¢
```

## ğŸŒ è®¿é—®æ–¹å¼

- **ç‰ˆæœ¬æ€»è§ˆ**: `https://your-username.github.io/your-project/versions/`
- **ç‰¹å®šç‰ˆæœ¬**: `https://your-username.github.io/your-project/versions/1.0.0/`
- **æœ€æ–°ç‰ˆæœ¬**: é€šè¿‡ç‰ˆæœ¬åˆ‡æ¢å™¨è‡ªåŠ¨è·³è½¬

## âš ï¸ æ³¨æ„äº‹é¡¹

### ç‰ˆæœ¬å·æ ¼å¼ï¼š
- âœ… `v1.0.0`, `v2.1.3`, `v1.0.0-beta.1`
- âŒ `1.0.0`, `version-1.0.0`, `release-1.0.0`

### æ„å»ºè¦æ±‚ï¼š
- ç¡®ä¿ `package.json` ä¸­æœ‰ `build` è„šæœ¬
- ç¡®ä¿æ„å»ºè¾“å‡ºç›®å½•æ­£ç¡®ï¼ˆé»˜è®¤ `dist/`ï¼‰
- ç¡®ä¿æ„å»ºæˆåŠŸç”Ÿæˆé™æ€æ–‡ä»¶

### æƒé™è®¾ç½®ï¼š
- ä»“åº“éœ€è¦å¯ç”¨ GitHub Pages
- Actions éœ€è¦æœ‰ `contents: write` æƒé™
- æ¨èä½¿ç”¨ `GITHUB_TOKEN`ï¼ˆè‡ªåŠ¨æä¾›ï¼‰

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜ï¼š

1. **æ„å»ºå¤±è´¥**ï¼š
   ```
   Error: Command failed: npm run build
   ```
   **è§£å†³**ï¼šæ£€æŸ¥ `package.json` çš„ `scripts.build` é…ç½®

2. **æƒé™é”™è¯¯**ï¼š
   ```
   Error: Resource not accessible by integration
   ```
   **è§£å†³**ï¼šæ£€æŸ¥ä»“åº“çš„ Actions æƒé™è®¾ç½®

3. **ç‰ˆæœ¬é‡å¤**ï¼š
   ```
   Error: Version v1.0.0 already exists
   ```
   **è§£å†³**ï¼šä½¿ç”¨ `force_archive: true` æˆ–é€‰æ‹©æ–°ç‰ˆæœ¬å·

4. **Pagesæœªæ›´æ–°**ï¼š
   - ç­‰å¾…å‡ åˆ†é’Ÿè®©GitHub Pageséƒ¨ç½²å®Œæˆ
   - æ£€æŸ¥ä»“åº“çš„Pagesè®¾ç½®æ˜¯å¦æ­£ç¡®
